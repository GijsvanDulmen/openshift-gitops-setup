apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: gateway
  namespace: istio-ingress
  annotations:
    keepalived-operator.redhat-cop.io/keepalivedgroup: keepalived-operator/keepalivedgroup-router
spec:
  gatewayClassName: istio
  addresses:
  - value: 192.168.2.100
    type: IPAddress
  listeners:
  - name: default
    port: 80
    protocol: HTTP

    # Q: Could this be more specific for team namespaces
    allowedRoutes:
      namespaces:
        from: All
  - name: default
    port: 443
    protocol: HTTP

    tls:
      mode: Terminate # If protocol is `TLS`, `Passthrough` is a possible mode
      certificateRefs:
      - kind: Secret
        group: ""
        name: cloud-ticq-org

    # Q: Could this be more specific for team namespaces
    allowedRoutes:
      namespaces:
        from: All
# ---
# apiVersion: gateway.networking.k8s.io/v1
# kind: HTTPRoute
# metadata:
#   name: application-a
#   namespace: team-backend-accept
# spec:
#   parentRefs:
#   - name: gateway
#     namespace: istio-ingress
#   # hostnames: ["httpbin.example.com"]
#   rules:
#   - matches:
#     - path:
#         type: PathPrefix
#         value: /get
#     backendRefs:
#     - name: application-a
#       port: 8080